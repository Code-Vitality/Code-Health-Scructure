@echo off
chcp 65001 >nul

echo üöÄ –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ gdscript-linter...

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è gdscript-linter
where gdscript-linter >nul 2>&1
if %ERRORLEVEL% NEQ 0 (
    echo ‚ùå gdscript-linter –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ gdscript-linter.
    exit /b 1
)

:: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–µ–∫—É—â–∞—è
set DIRECTORY=.

:: –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω –ø—É—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –∫–∞–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
if not "%~1"=="" set DIRECTORY=%~1

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∫–∞–∑–∞–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
if not exist "%DIRECTORY%" (
    echo ‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è %DIRECTORY% –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.
    exit /b 1
)

echo üöÄ –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã GDScript –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ %DIRECTORY%...

:: –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö .gd —Ñ–∞–π–ª–æ–≤
gdscript-linter -r "%DIRECTORY%"

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
if %ERRORLEVEL% EQU 0 (
    echo ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã GDScript –ø—Ä–æ—à–ª–∏ –ª–∏–Ω—Ç–∏–Ω–≥!
) else (
    echo ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ GDScript.
    exit /b 1
)
